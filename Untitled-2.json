{
  "log": {
    "disabled": false,
    "level": "info",
    "timestamp": true
  },
  
  "experimental": {
    "clash_api": {
      "external_controller": "0.0.0.0:9095",
      "external_ui": "/etc/sing-box/ui",
      "secret": "",
      "external_ui_download_url": "https://ok.bighaohao.eu.org/https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip",
      "external_ui_download_detour": "国内"
    },
    "cache_file": {
      "enabled": true
    }
  },
  
  "dns": {
    "servers": [
      { "tag": "proxyDns", "address": "tls://8.8.8.8", "detour": "默认代理" },
      { "tag": "localDns", "address": "223.5.5.5", "detour": "国内" }
    ],
    "rules": [
      { "outbound": "any", "server": "localDns", "disable_cache": true },
      { "rule_set": "geosite-cn", "server": "localDns" },   
      { "clash_mode": "direct", "server": "localDns" },
      { "clash_mode": "global", "server": "proxyDns" },
      { "rule_set": "geosite-geolocation-!cn", "server": "proxyDns" }
    ],
    "final": "localDns",
    "strategy": "ipv4_only"
  },

"inbounds": [
  {
    "type": "tun",
    "address": "172.19.0.1/30",
    "mtu": 9000,
    "auto_route": true,
    "auto_redirect": true,
    "strict_route": true,
    "stack": "system",
    "platform": {
      "http_proxy": {
        "enabled": true,
        "server": "127.0.0.1",
        "server_port": 2080
      }
    }
  },
  {
    "type": "mixed",
    "listen": "127.0.0.1",
    "listen_port": 2080,
    "sniff": true,
    "users": []
  }
],


"outbounds": [
  {
    "tag":"默认代理",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"OpenAI",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Google",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Telegram",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Spotify",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Amazon",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Youtube",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Apple",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"Microsoft",
    "type":"selector",
    "outbounds":[
      "泰国策略",
      "日本策略",
      "美国策略",
      "尼区策略",
      "全球手动",
      "国内"
    ]
  },
  {
    "tag":"泰国策略",
    "type":"urltest",
    "outbounds":[
      "{all}"
    ],
    "filter":[
      {"action":"exclude","keywords":["TH"]}
    ],
    "url": "http://www.gstatic.com/generate_204",
    "interval": "10m",
    "tolerance": 50
  },
  {
    "tag":"尼区策略",
    "type":"urltest",
    "outbounds":[
      "{all}"
    ],
    "filter":[
      {"action":"exclude","keywords":["NG"]}
    ],
    "url": "http://www.gstatic.com/generate_204",
    "interval": "10m",
    "tolerance": 50
  },
  {
    "tag":"日本策略",
    "type":"urltest",
    "outbounds":[
      "{all}"
    ],
    "filter":[
      {"action":"exclude","keywords":["JP"]}  
    ],
    "url": "http://www.gstatic.com/generate_204",
    "interval": "10m",
    "tolerance": 50
  },
  {
    "tag":"美国策略",
    "type":"urltest",
    "outbounds":[
      "{all}"
    ],
    "filter":[
      {"action":"exclude","keywords":["US"]}  
    ],
    "url": "http://www.gstatic.com/generate_204",
    "interval": "10m",
    "tolerance": 50
  },
  {
    "tag":"Global",
    "type":"selector",
    "outbounds":[
      "{all}"
    ]
  },
  { 
    "tag": "国内", 
    "type": "direct"
  },
  {
    "tag":"全球手动",
    "type":"selector",
    "outbounds":[
      "{all}"  
    ]
  },
  {
    "tag":"漏网之鱼",
    "type":"selector",
    "outbounds":[
      "泰国策略",  
      "日本策略",
      "美国策略",  
      "尼区策略",  
      "全球手动",  
      "国内"    
    ]
  }
],
"route": {
  "default_domain_resolver": {
    "server": "CN"
  },
  "auto_detect_interface": true,
  "final": "漏网之鱼",
  "rules": [
    {
      "inbound": ["tun-in", "mixed-in"],
      "action": "sniff"
    },
    {
      "type": "logical",
      "mode": "or",
      "rules":[
        {
          "port":53
        },
        {
          "protocol": "dns"
        }
      ],
      "action": "hijack-dns"
    },
    {
      "clash_mode": "direct",
      "outbound": "国内"
    },
    {
      "clash_mode": "global",
      "outbound": "默认代理"
    },
    {
      "domain": [
        "clash.razord.top",
        "yacd.metacubex.one",
        "yacd.haishan.me",
        "d.metacubex.one"
      ],
      "outbound": "国内"
    },
    {
      "ip_is_private": true,
      "outbound": "国内"
    },
    {
      "rule_set": "geosite-openai",
      "outbound": "OpenAI"
    },
    {
      "rule_set": "geosite-youtube",
      "outbound": "Youtube"
    },
    {
      "rule_set": ["geoip-telegram", "geosite-telegram"],
      "outbound": "Telegram"
    },
    {
      "rule_set": "geosite-spotify",
      "outbound": "Spotify"
    },
    {
      "rule_set": ["geoip-apple", "geosite-apple"],
      "outbound": "Apple"
    },
    {
      "rule_set": "geosite-microsoft",
      "outbound": "Microsoft"
    },
    {
        "rule_set": "geosite-amazon",
        "outbound": "Amazon"
      },
    {
        "rule_set": ["geoip-google", "geosite-google"],
        "outbound": "Google"
    },
    {
      "rule_set": "geosite-proxy",
      "outbound": "默认代理"
    },
    {
        "rule_set": ["geoip-cn","geosite-cn"],
        "outbound": "国内"
    }


   ],

  "rule_set": [
    {
      "tag": "geosite-openai",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/sing-box-ruleset/ai.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-youtube",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/sing-box-ruleset/youtube.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geoip-google",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geoip/google.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-google",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/google.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-github",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/github.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geoip-telegram",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geoip/telegram.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-telegram",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/telegram.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-spotify",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/spotify.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geoip-apple",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geoip/apple.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-apple",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/apple.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-amazon",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/amazon.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-microsoft",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/sing/geo/geosite/microsoft.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geoip-cn",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/sing-box-ruleset/cnip.srs",
      "download_detour": "国内"
    },
    {
      "tag": "geosite-cn",
      "type": "remote",
      "format": "binary",
      "url": "https://ok.bighaohao.eu.org/https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/sing-box-ruleset/cn.srs",   
      "download_detour": "国内"
    },
    {
        "tag": "geosite-proxy",
        "type": "remote",
        "format": "binary",
        "url":"https://ok.bighaohao.eu.org/https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/sing-box-ruleset/proxy.srs", 
        "download_detour": "国内"
    }
  ]
}
}
